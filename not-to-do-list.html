<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Not to do list</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
      integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      .wrapper {
        background: linear-gradient(
          rgba(251, 227, 160, 0.633),
          rgba(56, 143, 230, 0.562)
        );
        width: 100vw;
        min-height: 100vh;
      }

      .table {
        --bs-table-bg: transparent;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="container">
        <!-- heading row -->
        <div class="row">
          <div class="col p-5 text-center"><h1>NOT TO DO LIST</h1></div>
        </div>

        <!-- add form  -->
        <div class="row shadow-lg p-5 rounded-pill">
          <div class="col-sm-7">
            <div class="mb-3">
              <input
                type="text"
                class="form-control"
                id="task"
                placeholder="ADD TASK"
              />
            </div>
          </div>

          <div class="col-sm-2">
            <div class="mb-3">
              <input
                type="number"
                class="form-control"
                id="hour"
                placeholder="Hour"
              />
            </div>
          </div>

          <div class="col-sm-3">
            <button type="button" class="btn btn-primary" id="add-btn">
              ADD TASK
            </button>
          </div>
        </div>

        <!-- list  -->
        <div class="row p-5">
          <!-- good column -->
          <div class="col-md">
            <!-- heading row -->
            <div class="row">
              <div class="col text-center">
                <h3>GOOD LIST</h3>
                <hr />
              </div>
            </div>

            <!-- task row -->
            <div class="row">
              <div class="col">
                <table class="table">
                  <tbody id="goodList">
                    <!-- <tr>
                      <th scope="row">1</th>
                      <td>Task</td>
                      <td>10Hr</td>
                      <td class="text-end">
                        <button class="btn btn-danger">
                          <i class="fa-solid fa-trash"></i>
                        </button>

                        <button class="btn btn-success">
                          <i class="fa-solid fa-arrow-right"></i>
                        </button>
                      </td>
                    </tr> -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- bad column -->
          <div class="col-md">
            <!-- heading row -->
            <div class="row">
              <div class="col text-center">
                <h3>Bad LIST</h3>
                <hr />
              </div>
            </div>

            <!-- task row -->
            <div class="row">
              <div class="col">
                <table class="table">
                  <tbody id="badList">
                    <tr>
                      <th scope="row">1</th>
                      <td>Task</td>
                      <td>10Hr</td>
                      <td class="text-end">
                        <button class="btn btn-warning">
                          <i class="fa-solid fa-arrow-left"></i>
                        </button>

                        <button class="btn btn-danger">
                          <i class="fa-solid fa-trash"></i>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="alert alert-danger" role="alert">
                  You could have saved = <span id="badHr">10</span> hrs
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- total hours -->
        <div class="row">
          <div class="alert alert-success" role="alert">
            The total hours allocated =
            <span id="totalHr">22</span> hrs
          </div>
        </div>
      </div>
    </div>
  </body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"
    integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>

  <script>
    // 1. Data initialization
    // 2. populate the task list to UI
    // 3. calculate total hour
    // 4. calculate bad hour
    // 5. display total hour and bad hour
    // 6. Add Task

    let taskList = [
      {
        id: "1",
        task: "MAKING BED",
        hour: 10,
        type: "good",
      },
    ];

    const idGeneratingFunction = () => {
      let stringGenerator =
        "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

      let randomString = "";

      for (let i = 0; i < 6; i++) {
        let randomIndex = Math.floor(Math.random() * stringGenerator.length);

        randomString += stringGenerator[randomIndex];
      }

      return randomString;
    };

    // adding the task
    const addTask = () => {
      // 1. get the task value from task input field
      // 2. get th hour value from hour input field
      // 3. create a task object
      // 4. push the task object to task list

      // task input field value
      let taskField = document.getElementById("task");
      let task = taskField.value;

      // hour input field value
      let hourField = document.getElementById("hour");
      let hour = hourField.value;

      alert("TASK : " + task + " Hour : " + hour);

      // create task object
      let taskObject = {
        id: idGeneratingFunction(),
        task: task,
        hour: hour,
        type: "good",
      };

      console.log("BEFORE", JSON.stringify(taskList));

      taskList.push(taskObject);

      console.log("AFTER", JSON.stringify(taskList));

      // display updated task in the ui
      populateTask();
    };

    // deletting the task
    const deleteTask = (id) => {
      taskList = taskList.filter((task) => task.id != id);

      populateTask();
    };


    // swap task
    const swapTask = (id)=>{
      // get the task of the id 
      // swap the type of the task to either good or bad
      // populate the task
    }

    const calculateTotalHr = () => {
      let totalHr = 0;

      for (task of taskList) {
        totalHr = totalHr + task.hour;
      }
      return totalHr;
    };

    const calculateBadHr = () => {
      let totalHr = 0;

      for (task of taskList) {
        if (task.type == "bad") {
          totalHr = totalHr + task.hour;
        }
      }
      return totalHr;
    };

    const populateTask = () => {
      let tbodyString = "";

      let goodTbodyString = "";
      let badTbodyString = "";

      let taskNo = 1;

      for (task of taskList) {
        console.log(task);

        const trString = `<tr>
                      <th scope="row">${taskNo}</th>
                      <td>${task.task}</td>
                      <td>${task.hour} Hr</td>
                      <td class="text-end">
                        <button 
                            class="btn btn-danger" 
                            onclick="deleteTask('${task.id}')"
                          >
                          <i class="fa-solid fa-trash"></i>
                        </button>

                        <button class="btn btn-success">
                          <i class="fa-solid fa-arrow-right"></i>
                        </button>
                      </td>
                    </tr>`;

        tbodyString = tbodyString + trString;

        if (task.type === "good") {
          goodTbodyString += trString;
        } else {
          badTbodyString += trString;
        }

        taskNo += 1;
      }

      console.log(tbodyString);

      let goodListTbody = document.getElementById("goodList");

      let badListTbody = document.getElementById("badList");

      // populate good task
      goodListTbody.innerHTML = goodTbodyString;

      // populate bad task
      badListTbody.innerHTML = badTbodyString;

      // get the total hour
      let totalHour = calculateTotalHr();
      let totalHourSpan = document.getElementById("totalHr");
      totalHourSpan.innerText = totalHour;

      //   get the bad hour
      let badHour = calculateBadHr();

      let badHourSpan = document.getElementById("badHr");
      badHourSpan.innerText = badHour;
    };

    populateTask();

    // add click evnet to add button
    const buttonElement = document.getElementById("add-btn");
    buttonElement.addEventListener("click", addTask);
  </script>
</html>
